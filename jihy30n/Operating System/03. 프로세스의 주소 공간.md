# 프로세스 주소 공간 구조와 메모리 구역 분리 이유

## 1. 프로세스 생성과 메모리 구조

- 프로그램이 **CPU에 의해 실행**되면 운영체제는 **프로세스를 생성**하고, 해당 프로세스에 대해 **고유한 주소 공간을 메모리에 할당**함.
- 이 주소 공간은 일반적으로 다음과 같은 **세 가지 주요 영역**으로 구성

### 코드(Code) Segment
- 프로그램의 **실행 코드(명령어)**를 저장하는 영역
- 프로그램 내 모든 인스턴스에서 **내용이 동일**하므로, **공유 가능**

### 데이터(Data) Segment
- **전역 변수, 정적 변수**를 저장하는 영역
- 초기화 여부에 따라 `.data`와 `.bss` 영역으로 나뉨

### 스택(Stack) Segment
- **함수 호출 시 사용되는 지역 변수, 매개변수, 리턴 주소** 등을 저장하는 영역
- **LIFO 구조(Last In, First Out)**를 따름

---

## 2. 왜 메모리 구역을 나누는가?

### 공유와 효율성
- 운영체제는 **메모리 사용량을 최소화**하고, **동시에 여러 프로세스를 효율적으로 운영**하기 위해 메모리 영역을 나누어 관리함
- 특히, **Code Segment는 프로그램 내 모든 인스턴스에서 동일**하기 때문에 **하나만 메모리에 올리고 공유**함으로써 **메모리 절약** 가능

### 구조적 이유
![image](https://github.com/user-attachments/assets/e8b89e43-f8e9-455d-8fb0-d26b1070c745)

- **Stack과 Data를 분리**하는 이유
  - 스택은 함수 실행 시 **일시적으로 사용되는 데이터**를 저장하며, **동적으로 변화**하는 구조임
  - 데이터 영역은 **프로그램 전체에서 지속적으로 사용되는 전역 변수**를 저장함
  - 이 두 영역의 성격이 다르기 때문에 **구분하여 관리**하는 것이 효율적이며, 충돌이나 오류를 방지할 수 있음

---

# 질문
- 스택(Stack)에는 어떤 데이터가 저장되는가? 왜 함수가 호출될 때마다 새로운 스택이 생기는가?
  -> 스택에는 함수의 지역 변수, 매개변수, 리턴 주소 등이 저장되며, 함수마다 독립적인 실행 흐름을 보장하기 위해 새로운 스택이 생성됨
- 전역 변수는 어떤 메모리 구역에 저장되는가?
  -> Data Segment
- Code Segment는 왜 여러 프로세스가 함께 사용할 수 있는가?
 -> Code Segment는 읽기 전용이며 내용이 동일하므로, 여러 프로세스가 같은 명령어를 공유해서 메모리를 절약할 수 있음
