# 인터럽트

예기치 않은 상황이 발생할 경우 현재 실행 중인 작업을 `즉시` 중단 하고, 발생한 상황에 대한 우선 처리가 필요함을 CPU에 알리는것
우선 처리해야할 일이 끝나고 나면, 하던 일을 게속 진행

> 필요한 이유

1. 비효울적인 CPU 대기 방지

   - 입출력 작업은 느림, CPU가 입출력을 기다리기만 한다면 낭비가 심함.
   - 대신 CPU가 다른 일을 하고 있다가, 입출력이 완료되면 인터럽트를 통해서 알림을 받는다

2. 실시간 반응 처리

   - 마우스 클릭, 키보드 입력, 네트워크 수신등 예측할 수 없는 이벤트에 즉각 반응 해야함

3. 시분할 시스템 관리

   - 여러 프로세스를 동시에 다루기 위해 시간 할당이 끝난 프로세스를 멈추고 다른 프로세스를 실행할 수 있어야함 -> 인터럽트 기번 컨텍스트 스위칭

## 인터럽트 분류

1. 외부 인터럽트
   - CPU 외부에서 발생
     > 키보드 입력, 마우스 클릭, 디스크I/O 완료, 전원 이상
2. 내부 인터럽트

- CPU 내부에서 발생
  > 0으로 나누기, 오버플로우 잘못된 명령어 접근

3. 소프트웨어 인터럽트
   - 명시적으로 명령엉 의해 발생
     > 시스템 콜 , SVC

## 인터럽트 처리 과정

1. 주 프로그램 실행
2. 인터럽트 발생
3. 복귀 주소 저장
4. 인터럽트 벡터로 점프
5. 인터럽트 처리
6. 인터럽트 처리 완료
7. 복귀주소 로드
8. 마지막 실행 주소 점프
9. 주 프로그램 실행

## 폴링

용자가 명령어를 사용해 입력 핀의 값을 계속 읽어 변화를 알아내는 방식
인터럽트 요청 플래그를 차례로 비교하여 우선순위가 가장 높은 인터럽트 자원을 찾아 이에 맞는 인터럽트 서비스 루틴을 수행한다. (하드웨어에 비해 속도 느림)
ex) 전화가 올때까지 수화기를 들고 있는 사람

> 구조 단순, CPU 자원 낭비, 간단한 임베디드 시스템

## 입터럽트

MCU 자체가 하드웨적으로 변화를 체크하여 변화 시에만 일정한 동작을 하는 방식

- Daisy Chain
- 병렬 우선순위 부여
  ex) 벨소리가 들리면 그떄 수화기를 드는 사람
  > 응답 속도 빠름,하드웨어 지원 필요, 실시간성이 필요한 시스템
