# í™(Heap)

> **ì™„ì „ ì´ì§„ íŠ¸ë¦¬ì˜ ì¼ì¢…**ìœ¼ë¡œ ì—¬ëŸ¬ ê°’ ì¤‘, ìµœëŒ€ê°’ê³¼ ìµœì†Œê°’ì„ ë¹ ë¥´ê²Œ ì°¾ì•„ë‚´ë„ë¡ ë§Œë“¤ì–´ì§„ ìë£Œêµ¬ì¡°
> **ìš°ì„ ìˆœìœ„ í**ë¥¼ ìœ„í•´ì„œ ë§Œë“¤ì–´ì§„ ìë£Œêµ¬ì¡°

```ABAP
â“ ìš°ì„ ìˆœìœ„ í â“

- ìš°ì„ ìˆœìœ„ í: ìš°ì„ ìˆœìœ„ì˜ ê°œë…ì„ íì— ë„ì…í•œ ìë£Œ êµ¬ì¡°
- ë°ì´í„°ë“¤ì´ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§€ê³  ìˆê³  ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ë°ì´í„°ê°€ ë¨¼ì € ë‚˜ê°„ë‹¤.
- ìš°ì„ ìˆœìœ„ íëŠ” ë°°ì—´, ì—°ê²°ë¦¬ìŠ¤íŠ¸, í™ ìœ¼ë¡œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤. ì´ ì¤‘ì—ì„œ í™(heap)ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ê°€ì¥ íš¨ìœ¨ì ì´ë‹¤.
  (ì‚½ì…, ì‚­ì œê°€ ëª¨ë‘ OlogN ì´ê¸° ë•Œë¬¸)

ğŸ“Œ ìš°ì„ ìˆœìœ„ íì˜ ì´ìš© ì‚¬ë¡€

- ì‹œë®¬ë ˆì´ì…˜ ì‹œìŠ¤í…œ
- ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ ì œì–´
- ìš´ì˜ ì²´ì œì—ì„œì˜ ì‘ì—… ìŠ¤ì¼€ì¥´ë§
- ìˆ˜ì¹˜ í•´ì„ì ì¸ ê³„ì‚°
```

### ì„±ì§ˆ

```ABAP
1. í™ì€ ì¼ì¢…ì˜ ë°˜ì •ë ¬ ìƒíƒœ(ëŠìŠ¨í•œ ì •ë ¬ ìƒíƒœ) ë¥¼ ìœ ì§€í•œë‹¤.
  - í° ê°’ì´ ìƒìœ„ ë ˆë²¨ì— ìˆê³  ì‘ì€ ê°’ì´ í•˜ìœ„ ë ˆë²¨ì— ìˆë‹¤ëŠ” ì •ë„
  - ê°„ë‹¨íˆ ë§í•˜ë©´ ë¶€ëª¨ ë…¸ë“œì˜ í‚¤ ê°’ì´ ìì‹ ë…¸ë“œì˜ í‚¤ ê°’ë³´ë‹¤ í•­ìƒ í°(ì‘ì€) ì´ì§„ íŠ¸ë¦¬ë¥¼ ë§í•œë‹¤.
2. í™ íŠ¸ë¦¬ì—ì„œëŠ” ì¤‘ë³µëœ ê°’ì„ í—ˆìš©í•œë‹¤. (ì´ì§„ íƒìƒ‰ íŠ¸ë¦¬ì—ì„œëŠ” ì¤‘ë³µëœ ê°’ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.)
3. ìš”ì†Œì˜ ì‚½ì…/ì‚­ì œ ì—°ì‚°ì´ Oã’N ì´ë‹¤. (heapifyì˜ ê³¼ì •ì˜ ì‹œê°„ë³µì¡ë„ê°€ Oã’N ì„)
```

### í™ì˜ ì¢…ë¥˜

<img src='https://t1.daumcdn.net/cfile/tistory/17084F504DA9895214'>

- ìµœëŒ€ í™ (max heap): ë¶€ëª¨ ë…¸ë“œì˜ í‚¤ ê°’ì´ ìì‹ ë…¸ë“œì˜ í‚¤ ê°’ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì€ ì™„ì „ ì´ì§„ íŠ¸ë¦¬
- ìµœì†Œ í™ (min heap): ë¶€ëª¨ ë…¸ë“œì˜ í‚¤ ê°’ì´ ìì‹ ë…¸ë“œì˜ í‚¤ ê°’ë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì€ ì™„ì „ ì´ì§„ íŠ¸ë¦¬

### êµ¬í˜„

```ABAP
ğŸ’¡ Tip

- í™ì„ ì €ì¥í•˜ëŠ” í‘œì¤€ì ì¸ ìë£Œêµ¬ì¡°ëŠ” ë°°ì—´ì´ë‹¤.
- íŠ¹ì • ìœ„ì¹˜ì˜ ë…¸ë“œ ë²ˆí˜¸ëŠ” ìƒˆë¡œìš´ ë…¸ë“œê°€ ì¶”ê°€ë˜ì–´ë„ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤.

- í™ì—ì„œì˜ ë¶€ëª¨ ë…¸ë“œì™€ ìì‹ ë…¸ë“œì˜ ê´€ê³„
  - ì™¼ìª½ ìì‹ì˜ ì¸ë±ìŠ¤ = (ë¶€ëª¨ì˜ ì¸ë±ìŠ¤) * 2
  - ì˜¤ë¥¸ìª½ ìì‹ì˜ ì¸ë±ìŠ¤ = (ë¶€ëª¨ì˜ ì¸ë±ìŠ¤) * 2 + 1
  - ë¶€ëª¨ì˜ ì¸ë±ìŠ¤ = (ìì‹ì˜ ì¸ë±ìŠ¤) / 2

- í™ì˜ ìš”ì†Œ ì¶”ê°€ ê³¼ì •
  1. ë°°ì—´ì˜ ëì— ìš”ì†Œ push
  2. heapifyUp ê³¼ì •ì„ í†µí•´ ë¶€ëª¨ë…¸ë“œì™€ ë¹„êµí•˜ë©° ìë¦¬ë¥¼ ì°¾ì•„ê°

- í™ì˜ ìš”ì†Œ ì‚­ì œ ê³¼ì •
  1. ê°€ì¥ ì•ìª½ì˜ ë…¸ë“œì— ë§ˆì§€ë§‰ ë…¸ë“œë¥¼ ì‚½ì…
  2. heapifyDown ê³¼ì •ì„ í†µí•´ ìì‹ ë…¸ë“œì™€ ë¹„êµí•˜ë©° ìë¦¬ë¥¼ ì°¾ì•„ê°
```

```javascript
// ìµœëŒ€ í™ êµ¬í˜„ ì˜ˆì œ
class MaxHeap {
  constructor() {
    this.heap = [];
  }

  insert(value) {
    this.heap.push(value);
    this._heapifyUp();
  }

  extractMax() {
    if (this.size() === 0) return undefined;
    if (this.size() === 1) return this.heap.pop();

    const max = this.heap[0];
    this.heap[0] = this.heap.pop(); // ë§ˆì§€ë§‰ ì›ì†Œë¥¼ ë£¨íŠ¸ë¡œ ì˜¬ë¦¼
    this._heapifyDown();
    return max;
  }

  peek() {
    return this.heap[0];
  }

  size() {
    return this.heap.length;
  }

  _heapifyUp() {
    let index = this.heap.length - 1;
    while (index > 0) {
      const parent = Math.floor((index - 1) / 2);
      if (this.heap[parent] >= this.heap[index]) break;

      [this.heap[parent], this.heap[index]] = [
        this.heap[index],
        this.heap[parent],
      ];

      index = parent;
    }
  }

  _heapifyDown() {
    let index = 0;
    const length = this.heap.length;

    while (true) {
      const left = 2 * index + 1; // ì™¼ìª½ ìì‹ ìš”ì†Œì˜ idx
      const right = 2 * index + 2; // ì˜¤ë¥¸ìª½ ìì‹ ìš”ì†Œì˜ idx
      let largest = index;

      if (left < length && this.heap[left] > this.heap[largest]) {
        largest = left;
      }

      if (right < length && this.heap[right] > this.heap[largest]) {
        largest = right;
      }

      if (largest === index) break;

      [this.heap[largest], this.heap[index]] = [
        this.heap[index],
        this.heap[largest],
      ];

      index = largest;
    }
  }
}
```

#### ë ˆí¼ëŸ°ìŠ¤

- https://gmlwjd9405.github.io/2018/05/10/data-structure-heap.html
- https://gyoogle.dev/blog/computer-science/data-structure/Heap.html
