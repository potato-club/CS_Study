# B Tree & B+ Tree

### B Tree

> 데이터베이스, 파일시스템에서 널리 사용되는 트리 자료구조
> **이진트리를 확장**하여 **더 많은 수의 자식**을 가질 수 있게 일반화 시킴

#### 개념

<img src='https://velog.velcdn.com/images%2Femplam27%2Fpost%2Fddbae2c9-da94-457d-bad8-77ff6791255b%2FB%ED%8A%B8%EB%A6%AC%20%EA%B8%B0%EB%B3%B8%20%ED%98%95%ED%83%9C.png'>

- 모든 리프노드들이 같은 레벨을 가질 수 있도록 자동으로 밸런스를 맞추는 트리
- 정렬된 순서를 보장
- 멀티레벨 인덱싱을 통한 빠른 검색 가능
- 하나의 노드에 많은 수의 정보를 가지고 있을 수 있음
- 위 사진은 차수가 3인 B-Tree 이며, 파란색 부분은 **각 노드의 key** 빨간색 부분은 **자식 노드들을 가리키는 포인터**

#### 규칙

- 노드의 자료수가 N이면, 자식 수는 N+1 이어야 한다.
- 각 노드의 자료는 정렬된 상태여야한다
- 루트 노드는 적어도 2개 이상의 자식을 가져야한다.
- 루트 노드를 제외한 모든 노드는 적어도 M/2 개의 자료를 가지고 있어야한다.
- 외부 노드로 가는 경로의 길이는 모두 같다.
- 입력 자료는 중복될 수 없다.

#### B-Tree key 검색, 삽입, 삭제 과정 정리된 블로그 글

- https://velog.io/@emplam27/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0-%EA%B7%B8%EB%A6%BC%EC%9C%BC%EB%A1%9C-%EC%95%8C%EC%95%84%EB%B3%B4%EB%8A%94-B-Tree

### B+ Tree

> 데이터에 빠른 접근을 위한 인덱스 역할만 하는 비단말 노드(not Leaf)가 추가로 있음

##### 인덱싱을 나타낸 그림 (key 값을 이용해 효과적으로 검색 가능)

<img src='https://velog.velcdn.com/images%2Femplam27%2Fpost%2F64290106-d927-4a82-9e08-8e52783c7dd3%2FDB%20%EC%9D%B8%EB%8D%B1%EC%8A%A4.jpg'>

##### 위 인덱싱을 B+ Tree로 표현

<img src='https://velog.velcdn.com/images%2Femplam27%2Fpost%2Fbcbce100-d475-4cda-aebe-946d1813949c%2FB%ED%94%8C%EB%9F%AC%EC%8A%A4%20%ED%8A%B8%EB%A6%AC%20%EA%B8%B0%EB%B3%B8%20%ED%98%95%ED%83%9C.jpg'>

- B+ Tree는 데이터베이스 등에서 많이 사용하는 균형 잡힌 트리 구조
- 내부 노드(부모 노드)에는 key만 저장되고, 리프 노드에는 실제 데이터(key-value) 쌍이 저장됨
- 내부 노드의 key들은 자식 노드들을 탐색하기 위한 기준점 역할만 하고, 데이터를 직접 가지고 있진 않음
- 리프 노드는 모든 데이터를 오름차순으로 가지고 있고, 인접한 리프 노드끼리는 링크드 리스트처럼 연결되어 있음

#### B Tree & B+ Tree 의 차이점

```ABAP
1. 데이터 저장 위치
   - B Tree: 내부 노드와 리프 노드 모두 key와 데이터를 가짐
   - B+ Tree: 모든 데이터는 리프 노드에만 저장되며, 내부 노드는 key만 가짐

2. 리프 노드 연결 방식
   - B Tree: 리프 노드 간 연결이 없어 순차 탐색 시 루트부터 다시 탐색해야 함
   - B+ Tree: 리프 노드끼리 연결되어 있어 순차 탐색이 빠르고 효율적임 (선형 탐색 가능)

3. 검색 성능
   - B Tree: 원하는 데이터를 찾기 위해 루트에서 시작해 각 노드를 탐색해야 함
   - B+ Tree: 리프 노드에 모든 데이터가 있으므로, 범위 검색 및 전체 탐색에 유리함

4. 삽입/삭제 시 부모 key 변경 여부
   - B Tree: 삽입/삭제 시 구조 변경이 일어나면 부모 key도 함께 변경될 수 있음
   - B+ Tree: 리프 노드의 첫 key가 부모의 key로 사용되며, 일반적으로 삽입/삭제 시 부모 key가 함께 변경됨
     → 하지만 구현 방식에 따라 key를 고정시켜 부모 노드의 변경을 최소화할 수도 있음 (즉, "작거나 같다"는 표현 사용 가능)
```

#### key 삽입, 삭제 과정 정리된 블로그 글

- https://velog.io/@emplam27/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0-%EA%B7%B8%EB%A6%BC%EC%9C%BC%EB%A1%9C-%EC%95%8C%EC%95%84%EB%B3%B4%EB%8A%94-B-Plus-Tree#key-%EC%82%BD%EC%9E%85%EA%B3%BC%EC%A0%95
