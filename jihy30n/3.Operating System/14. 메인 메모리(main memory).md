# 메인 메모리(Main Memory)와 관련 개념

## 메인 메모리 개요
- CPU가 **직접 접근**할 수 있는 기억 장치
- 프로세스가 실행되기 위해서는 프로그램이 메인 메모리에 **적재**되어야 함
- 주소가 할당된 **연속된 바이트들의 집합**으로 구성


## MMU (Memory Management Unit)
- **논리 주소 → 물리 주소**로 변환
- 메모리 보호, 캐시 관리 등 **CPU의 메모리 접근을 제어**하는 하드웨어
- **가상 주소 → 실제 주소**로 변환을 지원하여 프로그램 실행 가능
- 프로세스가 물리 메모리보다 커도 실행 가능
![image](https://github.com/user-attachments/assets/9bcf525a-8133-47b9-ac0f-79fb3bdbfd73)

### 메모리 보호 (Base & Limit 레지스터)
- 각 프로세스에 대해 접근 가능한 **합법적인 주소 영역** 설정
- `base <= x < base + limit`
- 범위를 벗어난 접근 시 **trap** 발생
- base/limit 레지스터는 **커널 모드에서만 수정 가능**

## 메모리 과할당 (Over-Allocation)
- 실제 메모리보다 **더 많은 메모리 할당** 요청 시 발생
- 가상 메모리를 사용해 눈속임으로 할당하지만, **페이지 폴트**가 발생하면 들킬 수 있음

### 해결 방법
1. **Swap out**: 메모리에 올라와 있는 프로세스를 디스크로 내보냄
2. 빈 프레임 확보 후 필요한 페이지를 로딩


## 페이지 교체 (Page Replacement)
- 페이지 폴트 발생 시 빈 프레임이 없으면 **victim 페이지 선정 → 교체**
- **페이지 테이블 업데이트** 후 프로세스를 정상 실행

### 오버헤드 감소 기법
1. **변경 비트 사용**:
   - 변경됨 → 디스크에 기록 필요
   - 변경 안됨 → 기록 생략 가능 (I/O 절반 감소)
2. **효율적인 페이지 교체 알고리즘 사용**:
   - FIFO
   - OPT
   - LRU

## 캐시 메모리 (Cache Memory)
- 주기억장치의 일부 정보를 **고속으로 임시 저장**하는 장치
- CPU ↔ 메인 메모리 속도 차이를 줄여 성능 향상
- 주로 **SRAM(플립플롭 기반)**으로 구성되어 DRAM보다 빠름

### 캐시 동작 방식
1. CPU가 주소 요청 → 캐시 확인
2. **Hit** → 캐시에서 즉시 전달
3. **Miss** → 메인 메모리에서 불러와 캐시에 저장 후 CPU에 전달

## 지역성(Locality)
- **시간 지역성**: 최근에 참조한 데이터는 곧 다시 참조
- **공간 지역성**: 인접한 주소들이 반복 참조됨

## 캐싱 라인 (Caching Line)
- 데이터를 **묶음(set/map)** 단위로 캐시에 저장
- 주소 정보와 함께 저장해 빠르게 참조 가능
- 캐시 탐색 시간을 줄여 효율적으로 캐시 활용 가능
