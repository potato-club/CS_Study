> 프로세스 : 프로그램을 메모리 상에서 실행중인 작업
> 스레드 : 프로세스 안에서 실행되는 여러 흐름 단위

기본적으로 프로세스마다 1개의 스레드 소유 (메인 스레드 포함)

## 프로세스

- Code : 코드 자체를 구성하는 메모리 영역(프로그램 명령)
- Data : 초기값이 있는 전역변수, 배열
- Bss : 초기값이 없는 전역변수, 배열
  > 정적영역
- Heap : 동적 할당 시 사용 (new(), malloc() 등)
- Stack : 지역변수, 매개변수, 리턴 값 (임시 메모리 영역)
  > 동적영역
  > 메모리에서 동적/정적 **_영역_**을 구분하는것과 각 변수들의 동적/정적**_할당_**은 별개이다

정적 영역 | 운영체제가 미리 정해둔 메모리 공간 (data, bss 등) | "미리 정해진 위치에 저장"
정적 할당 | 컴파일할 때 크기와 위치가 결정되는 변수 | "코드 짤 때 이미 공간이 정해짐"
동적 영역 | 프로그램 실행 중에 생기는 공간 (heap, stack) | "실행하면서 생기는 공간"
동적 할당 | 실행 중에 메모리를 요청해서 사용하는 방식 | "코드 실행 도중 요청해서 공간을 만듦"

## 스레드

Stack만 따로 할당 받고 나머지 영역은 서로 공유

프로세스는 자신만의 고유 공간과 자원을 할당받아 사용하는데 반해, 스레드는 다른 스레드와 공간, 자원을 공유하면서 사용하는 차이가 존재함

## 멀티 프로세스

> 하나의 프로그램을 여러개의 프로세스로 구성하여 각 프로세스가 병렬적으로 작업을 수행하는 것
> 잠정 : 안전성(메모리 침범 문제를 OS 차원에서 해결)
> 단점 : 각각 독립된 메모리 영역을 갖고 있어, 작업량이 많을 수록 오버헤드 발생

> 0.01초 동안 A 일을 수행하다가 0.01초 동안 B를 실행하고 이를 계속 반복
> 두개의 일을 동시에 실행하는것 처럼 보이지만 사실상 하나씩 처리 하고 있는중인거임

**_Context Switching_**으로 인한 성능 저하
-> 프로세스의 상태 정보를 저장하고 복원하는 일련의 과정
동작 중인 프로세스가 대기하면서 해당 프로세스의 상태를 보관하고, 대기하고 있던 다음 순번의 프로세스가 동작하면서 이전에 보관했던 프로세스 상태를 복구하는 과정을 말함
-> 프로세스는 각 독립된 메모리 영역을 항당받아 사용되므로, 캐시 메모리 초기화와 같은 무거운 작업이 진행되었을댸 옵헤드가 발생할 문제가 존재함

## 멀티 스레드

> 하나의 응용 프로그램에서 여러 스레드를 구성해 각 스레드가 하나의 작업을 처리하는것

스레드들이 공유 메모리를 통해 다수의 작업을 동시에 처리하도록 해줌
장점 : 독립적인 프로세스에 비해 공유 메모리만큼의 시간, 자원 손실이 감소 전역 변수와 정적 변수에 대한 자료 공유 가능
단점 : 안정적이 낮음, 하나의 스레드가 데이터 공간을 망가트리면 (공유 메모리를 갖기 때문에) 모든 스레드 작동 불능

```
let count = 0;
Thread A: count += 1
Thread B: count += 1
```

여기서 두 스레드가 동시에 이 연산을 처리 하려 했을때
둘다 같은 값을 읽고 같은 값을 써서 count = 1 이 되는거지
이런걸 **_경쟁 상태 _**라고 하고 이걸 해결하기 위한 방법이 바로

### 동기화 라는거야

공유 자원을 동시에 접근 하지 못하게 하는 보호장치
이떄 사용하는 기법이 바로 `임계 구역 보호 (critical Section)`

```
여러 스레드가 공유 데이터를 사용하는 코드 블록 중,
한 번에 단 하나의 스레드만 실행되어야 하는 영역
```

이를 위한 세가지 조건이 필요함

1. 상호 배제 (Mutual Exclusion)
   두 개 이상의 스레드가 동시에 임계구역에 들어갈 수 없다
   단 한 스레드만 접근 가능해야 한다
   예: 화장실 하나인데 한 명씩 들어가야 함
2. 진행 (Progress)
   임계구역에 들어가려는 스레드가 없으면, 다른 스레드가 계속 기다릴 필요가 없어야 함
   아무도 안 쓰고 있는데 괜히 대기하면 안 됨
   예: 화장실 비어있는데 아무도 안 들어가면 손해잖아
3. 한정된 대기 (Bounded Waiting)
   어떤 스레드도 무한히 대기하면 안 됨
   누군가는 계속 들어가고, 누군가는 계속 못 들어가는 상황
   예: 줄 서있는데 맨 앞 사람만 계속 쓰면 불공평하잖아
