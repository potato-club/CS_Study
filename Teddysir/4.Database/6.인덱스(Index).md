# 💻 Index

---

> 추가적인 쓰기 작업과 저장 공간을 활용하여 데이터베이스 테이블의 검색 속도를 향상시키기 위한 자료구조이다.

## 1. ✅ DB Index 
### 목적
  - 관계형 DB에서 검색 속도를 높이기 위한 기술
  - 테이블의 컬럼을  색인화 한다.
  - 해당 테이블의 레코드를 풀 스캔 안한다.
  - 색인화 된 Index 파일 검색으로 검색 속도 향상 
### 과정
  - 테이블을 생성하면, MYD, MYI, FRM 3개의 파일이 생성된다.
  - MYD : 실제 데이터가 있는 파일
  - MYI : index 정보가 있는 파일
  - FRM : 테이블 구조가 저장되어 있는 파일
    - index 를 사용해야 MYI존재 사용안하면 없음,

### 단점
- index 생성시 파일 크기 증가
- 한 페이지를 동시에 수정할 수 있는 병행성 줄어듦
- 인덱스 된 field에서 data를 업데이트 하거나, 레코드를 추가 또는 삭제시 성능이 떨어짐
- 데이터 변경 작업이 자주 일어나는 경우, index를 재작성해야 하므로, 성능에 영향을 미침.

### 상황 분석
- 사용하면 좋은 경우
  - Where 절에서 자주 사용 되는 컬럼
  - 외래키가 사용되는 컬럼
  - join에 자주 사용되는 컬럼
- 인덱스 사용을 피해야 하는 경우
  - 데이터 중복도가 높은 컬럼
  - DML이 자주 일어나는 컬럼 (INSERT, UPDATE, DELETE)

### DML 일어났을경우

- INSERT
  - 기존 블럭에 여유가 없을때 새로운 데이터 입력
  - 새로운 블럭 할당 받은 후, 키를 옮기는 작업을 수행 
  - 인덱스 split 작업 동안 해당 블럭의 키값에 대해서 dml이 블로킹됨 -> 대기 이벤트 발생

- DELETE
  - 테이블에서 데이터가 삭제되는 경우 : 데이터가 지워지고, 다른 데이터가 그 공간을 사용 가능
  - 인덱스에서 데이터가 삭제되는 경우 : 데이터가 안지워지고, 사용 안됨 표시만 해둠
  - -> 테이블의 데이터 수와 인덱스의 데이터 수가 다를 수 있다.

- UPDATE
  - 테이블에서 업데이트가 발생하면 -> 인덱스는 업데이트 할 수 없다.
  - 인덱스에서는 삭제가 발생한 후, 새로운 작업의 삽입 작업 / 2배의 작업이 소요되어 힘듦


---

# 🤔 질문

### 1. 인덱스는 왜 쓰나요?
- 관계형 데이터 베이스에서 검색 속도를 높이기 위해 씁니다. 추가적인 공간을 활용해서 검색 속도를 향상시킵니다.

### 2. 인덱스 단점은요?
- 파일의 크기가 증가합니다 아무래도 공간을 많이 더 차지하니까요 그리고 DML이 발생시에 오히려 역효과를 발생시킵니다.
