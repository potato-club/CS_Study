# Join

```
❓ 조인이란 ❓

> 두 개 이상의 테이블이나 데이터베이스를 연결하여 데이터를 검색하는 방법
> 테이블을 연결하려면, 적어도 하나의 컬럼을 서로 공유하고 있어야 하므로
  이를 이용하여 데이터 검색에 활용
```

### JOIN 종류

- INNER JOIN
- LEFT OUTER JOIN
- RIGHT OUTER JOIN
- FULL OUTER JOIN
- CROSS JOIN
- SELF JOIN

### INNER JOIN

> 교집합으로, 기준 테이블과 join 테이블의 중복된 값을 보여준다.

```sql
SELECT A.NAME, B.AGE
FROM EX_TABLE A
INNER JOIN JOIN_TABLE B ON A.NO_EMP = B.NO_EMP
```

### LEFT OUTER JOIN

> 기준테이블값과 조인테이블과 중복된 값을 보여준다.

```sql
-- 왼쪽테이블 기준으로 JOIN
-- 조인 대상 테이블에 해당하는 값이 있으면 붙이고, 없으면 NULL로 채움

SELECT users.*
FROM users
LEFT OUTER JOIN orders ON users.id = orders.user_id
WHERE orders.id IS NULL;
```

### RIGHT OUTER JOIN

> LEFT OUTER JOIN과는 반대로 오른쪽 테이블 기준으로 JOIN하는 것

```sql
-- 실무에서는 LEFT JOIN을 더 자주 사용하며, RIGHT JOIN은 가독성을 위해 방향을 바꿔 쿼리를 쓰고 싶을 때 쓰는 경우가 많습니다.

-- 아래 두 쿼리는 결과 동일
-- LEFT OUTER JOIN
SELECT users.name, orders.id
FROM users
LEFT OUTER JOIN orders ON users.id = orders.user_id;

-- RIGHT OUTER JOIN
SELECT users.name, orders.id
FROM orders
RIGHT OUTER JOIN users ON users.id = orders.user_id;
```

### FULL OUTER JOIN

> 합집합 => A와 B 테이블의 모든 데이터가 검색된다.

```sql
SELECT
A.NAME, B.AGE
FROM EX_TABLE A
FULL OUTER JOIN JOIN_TABLE B ON A.NO_EMP = B.NO_EMP
```

### CROSS JOIN

> 모든 경우의 수를 전부 표현해주는 방식이다.
> 두 테이블의 모든 행을 서로 곱해서 조합을 만듭니다.
> ex) A가 3개, B가 4개면 총 3\*4 = 12개의 데이터가 검색된다.

```sql
-- 모든 색상과 모든 사이즈 조합의 상품 옵션 만들기
SELECT colors.name, sizes.name
FROM colors
CROSS JOIN sizes;

-- 하나의 제품 가격에 대해 다양한 환율을 적용한 시뮬레이션
SELECT products.name, exchange.currency, products.price * exchange.rate AS converted_price
FROM products
CROSS JOIN exchange;
```

### SELF JOIN

> 자기자신과 자기자신을 조인하는 것이다.
> 하나의 테이블을 여러번 복사해서 조인한다고 생각하면 편하다.
> 자신이 갖고 있는 칼럼을 다양하게 변형시켜 활용할 때 자주 사용한다.

```sql
-- 상사-직원 관계 (계층 구조 표현)
SELECT E.name AS employee, M.name AS manager
FROM employees E
LEFT JOIN employees M ON E.manager_id = M.id;
```
