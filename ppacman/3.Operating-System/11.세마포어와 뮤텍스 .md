# 세마포어 & 뮤텍스

공유된 자원에 여러 프로세스가 동시에 접근하면서 문제가 발생할 수 있다.
이때 공유된 자원의 데이터는 한 번에 하나의 프로세스만 접근할 수 있도록 제한을 둬야 한다.
이를 위해 나온것이 바로 '세마포어'

> 멀티프로그래밍 환경에서 공유 자원에 대한 접근을 제한하는 방법

## 임계 구역

여러 프로세스가 데이터를 공유하며 수행될 때, 각 프로세스에서 공유 데이터를 접근하는 프로그램 코드 부분
공유 데이터를 여러 프로세스가 동시에 접근할 때 잘못된 결과를 만들 수 있기 때문에, 한 프로세스가 임계 구역을 수행할때는 다른 프로세스가 접근하지 못하도록 해야 한다.

## 세마포어 P, V 연산

정수 값을 가지는 동기화 객체
공유 자원을 여러 개까지 동시에 접근 가능하게 조절할 수 있음

> 프린터 3대(자원)에 대해 최대 3명까지만 동시에 사용 가능
> 세마포어 초기값을 3으로 설정
> 한 명이 사용하면 값이 2로 줄고, 모두 차면 더 이상 접근 불가

## 뮤텍스

오직 한 스레드/ 프로세스만 공유 자원에 접근할 수 있게 함
Lock / Unlock 방식
한 스레드가 lock을 걸면 다른 스레드는 접근 불가
작업이 끝나면 unlock을 수행해야 다음이 접근 가능
보통 이진 상태 (0 또는 1)만 가짐
소유권이 존재
→ lock을 걸었던 스레드만 unlock 가능

> 화장실 하나(자원)에 열쇠 하나(뮤텍스)만 존재한다.
> 누군가 열쇠를 가지고 들어가면 다른 사람은 기다려야 한다.
> 사용이 끝나고 나서 열쇠를 돌려줘야 다음 사람이 들어갈 수 있다.
